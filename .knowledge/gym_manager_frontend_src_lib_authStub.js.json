{"is_source_file": true, "format": "JavaScript", "description": "This file provides utility functions for local development authentication in a gym management frontend project. It includes methods for storing and retrieving session info, role mappings, and emulated sign-in/sign-out processes using localStorage, enabling role-based access control and demo flows without a backend.", "external_files": [], "external_methods": ["localStorage.getItem", "localStorage.setItem", "localStorage.removeItem", "JSON.parse", "JSON.stringify"], "published": ["getStorageKey", "getRoleMapKey", "getCurrentSession", "setCurrentSession", "clearAuthStorage", "ensureStubAuthInRedux", "getCurrentRole", "setRoleForEmail", "getRoleForEmail", "signIn", "signOut", "getUser"], "classes": [], "methods": [{"name": "getStorageKey()", "description": "Returns the localStorage key used to persist the current session.", "scope": "", "scopeKind": ""}, {"name": "getRoleMapKey()", "description": "Returns the localStorage key used to persist the email-to-role mapping.", "scope": "", "scopeKind": ""}, {"name": "getCurrentSession()", "description": "Fetches and parses the current stub session object from localStorage.", "scope": "", "scopeKind": ""}, {"name": "setCurrentSession(session)", "description": "Stores the provided session object into localStorage.", "scope": "", "scopeKind": ""}, {"name": "clearAuthStorage()", "description": "Removes the session information from localStorage.", "scope": "", "scopeKind": ""}, {"name": "ensureStubAuthInRedux(seedFn)", "description": "Ensures a stub session exists for Redux, creating a default session if none exists, and calls a seed function with the session.", "scope": "", "scopeKind": ""}, {"name": "getCurrentRole()", "description": "Retrieves the role from the current session.", "scope": "", "scopeKind": ""}, {"name": "setRoleForEmail(email, role)", "description": "Assigns a specific role to an email address in the role map.", "scope": "", "scopeKind": ""}, {"name": "getRoleForEmail(email)", "description": "Returns the role associated with an email, with special handling for emails containing 'owner'.", "scope": "", "scopeKind": ""}, {"name": "signIn(email, password)", "description": "Emulates user sign-in by creating a session based on the email, assigning roles, and storing it.", "scope": "", "scopeKind": ""}, {"name": "signOut()", "description": "Emulates user sign-out by clearing session data.", "scope": "", "scopeKind": ""}, {"name": "getUser()", "description": "Returns the current user object based on stored session info.", "scope": "", "scopeKind": ""}, {"name": "readRoleMap()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "writeRoleMap(map)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["localStorage.getItem", "localStorage.setItem", "localStorage.removeItem", "JSON.parse", "JSON.stringify"], "search-terms": ["authStub", "localStorage session", "role-based auth", "frontend stub auth", "localStorage-based authentication"], "state": 2, "file_id": 70, "knowledge_revision": 205, "git_revision": "", "ctags": [{"_type": "tag", "name": "clearAuthStorage", "path": "/home/kavia/workspace/code-generation/gym-management-system-21100-21109/gym_manager_frontend/src/lib/authStub.js", "pattern": "/^export function clearAuthStorage() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/gym-management-system-21100-21109/gym_manager_frontend/src/lib/authStub.js", "pattern": "/^  const fallback = { email: 'member@example.com', role: 'member', name: 'Local Member' };$/", "language": "JavaScript", "kind": "property", "scope": "ensureStubAuthInRedux.fallback", "scopeKind": "class"}, {"_type": "tag", "name": "ensureStubAuthInRedux", "path": "/home/kavia/workspace/code-generation/gym-management-system-21100-21109/gym_manager_frontend/src/lib/authStub.js", "pattern": "/^export function ensureStubAuthInRedux(seedFn) {$/", "language": "JavaScript", "kind": "function", "signature": "(seedFn)"}, {"_type": "tag", "name": "fallback", "path": "/home/kavia/workspace/code-generation/gym-management-system-21100-21109/gym_manager_frontend/src/lib/authStub.js", "pattern": "/^  const fallback = { email: 'member@example.com', role: 'member', name: 'Local Member' };$/", "language": "JavaScript", "kind": "class", "scope": "ensureStubAuthInRedux", "scopeKind": "class"}, {"_type": "tag", "name": "getCurrentRole", "path": "/home/kavia/workspace/code-generation/gym-management-system-21100-21109/gym_manager_frontend/src/lib/authStub.js", "pattern": "/^export function getCurrentRole() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getCurrentSession", "path": "/home/kavia/workspace/code-generation/gym-management-system-21100-21109/gym_manager_frontend/src/lib/authStub.js", "pattern": "/^export function getCurrentSession() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getRoleForEmail", "path": "/home/kavia/workspace/code-generation/gym-management-system-21100-21109/gym_manager_frontend/src/lib/authStub.js", "pattern": "/^export function getRoleForEmail(email) {$/", "language": "JavaScript", "kind": "function", "signature": "(email)"}, {"_type": "tag", "name": "getRoleMapKey", "path": "/home/kavia/workspace/code-generation/gym-management-system-21100-21109/gym_manager_frontend/src/lib/authStub.js", "pattern": "/^export function getRoleMapKey() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getStorageKey", "path": "/home/kavia/workspace/code-generation/gym-management-system-21100-21109/gym_manager_frontend/src/lib/authStub.js", "pattern": "/^export function getStorageKey() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getUser", "path": "/home/kavia/workspace/code-generation/gym-management-system-21100-21109/gym_manager_frontend/src/lib/authStub.js", "pattern": "/^export async function getUser() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/gym-management-system-21100-21109/gym_manager_frontend/src/lib/authStub.js", "pattern": "/^  const user = { id: 'stub-user', name, email, role };$/", "language": "JavaScript", "kind": "property", "scope": "signIn.user", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/gym-management-system-21100-21109/gym_manager_frontend/src/lib/authStub.js", "pattern": "/^  const fallback = { email: 'member@example.com', role: 'member', name: 'Local Member' };$/", "language": "JavaScript", "kind": "property", "scope": "ensureStubAuthInRedux.fallback", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/gym-management-system-21100-21109/gym_manager_frontend/src/lib/authStub.js", "pattern": "/^  const user = { id: 'stub-user', name, email, role };$/", "language": "JavaScript", "kind": "field", "scope": "signIn.user", "scopeKind": "class"}, {"_type": "tag", "name": "readRoleMap", "path": "/home/kavia/workspace/code-generation/gym-management-system-21100-21109/gym_manager_frontend/src/lib/authStub.js", "pattern": "/^function readRoleMap() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "role", "path": "/home/kavia/workspace/code-generation/gym-management-system-21100-21109/gym_manager_frontend/src/lib/authStub.js", "pattern": "/^  const fallback = { email: 'member@example.com', role: 'member', name: 'Local Member' };$/", "language": "JavaScript", "kind": "property", "scope": "ensureStubAuthInRedux.fallback", "scopeKind": "class"}, {"_type": "tag", "name": "setCurrentSession", "path": "/home/kavia/workspace/code-generation/gym-management-system-21100-21109/gym_manager_frontend/src/lib/authStub.js", "pattern": "/^export function setCurrentSession(session) {$/", "language": "JavaScript", "kind": "function", "signature": "(session)"}, {"_type": "tag", "name": "setRoleForEmail", "path": "/home/kavia/workspace/code-generation/gym-management-system-21100-21109/gym_manager_frontend/src/lib/authStub.js", "pattern": "/^export function setRoleForEmail(email, role) {$/", "language": "JavaScript", "kind": "function", "signature": "(email, role)"}, {"_type": "tag", "name": "signIn", "path": "/home/kavia/workspace/code-generation/gym-management-system-21100-21109/gym_manager_frontend/src/lib/authStub.js", "pattern": "/^export async function signIn(email, password) {$/", "language": "JavaScript", "kind": "function", "signature": "(email, password)"}, {"_type": "tag", "name": "signOut", "path": "/home/kavia/workspace/code-generation/gym-management-system-21100-21109/gym_manager_frontend/src/lib/authStub.js", "pattern": "/^export async function signOut() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/code-generation/gym-management-system-21100-21109/gym_manager_frontend/src/lib/authStub.js", "pattern": "/^  const user = { id: 'stub-user', name, email, role };$/", "language": "JavaScript", "kind": "class", "scope": "signIn", "scopeKind": "class"}, {"_type": "tag", "name": "writeRoleMap", "path": "/home/kavia/workspace/code-generation/gym-management-system-21100-21109/gym_manager_frontend/src/lib/authStub.js", "pattern": "/^function writeRoleMap(map) {$/", "language": "JavaScript", "kind": "function", "signature": "(map)"}], "hash": "78fc756755937a996a88db9a23553ae8", "format-version": 4, "code-base-name": "gym_manager_frontend", "filename": "gym_manager_frontend/src/lib/authStub.js", "fields": [{"name": "const fallback = { email: 'member@example.com', role: 'member', name: 'Local Member' };", "scope": "ensureStubAuthInRedux.fallback", "scopeKind": "class", "description": "unavailable"}, {"name": "const user = { id: 'stub-user', name, email, role };", "scope": "signIn.user", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"205": ""}]}